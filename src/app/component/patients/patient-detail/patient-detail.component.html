<mat-card *ngIf="!isLoading && !errorMessage && patient" class="patient-card">
  <mat-card-header>
    <mat-card-title>EDIT PATIENT</mat-card-title>
    <mat-card-subtitle>Patient ID: {{ patient.patientId }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="patient-info-grid">
      <!-- Personal Information Section -->
      <div class="info-section">
        <h3><mat-icon>person</mat-icon> Personal Information</h3>
        <div class="form-group">
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput [(ngModel)]="patientName">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>CIN</mat-label>
            <input matInput [(ngModel)]="patientCin">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Age</mat-label>
            <input matInput type="number" [(ngModel)]="patientAge">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Gender</mat-label>
            <mat-select [(ngModel)]="patientGender">
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <!-- Contact Information Section -->
      <div class="info-section">
        <h3><mat-icon>phone</mat-icon> Contact Information</h3>
        <div class="form-group">
          <mat-form-field appearance="outline">
            <mat-label>Phone</mat-label>
            <input matInput [(ngModel)]="patientPhone">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput type="email" [(ngModel)]="patientEmail">
          </mat-form-field>
        </div>
      </div>

      <!-- Medical Information Section -->
      <div class="info-section">
        <h3><mat-icon>medical_services</mat-icon> Medical Information</h3>
        <div class="form-group">
          <mat-form-field appearance="outline">
            <mat-label>Status</mat-label>
            <mat-select [(ngModel)]="patientStatus">
              <mat-option value="active">Active</mat-option>
              <mat-option value="inactive">Inactive</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Disease</mat-label>
            <input matInput [(ngModel)]="patientDisease">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Insurance</mat-label>
            <input matInput [(ngModel)]="patientInsurance">
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Documents Section -->
    <div class="documents-section">
      <h3><mat-icon>description</mat-icon> Documents</h3>
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Add New Document</mat-label>
          <input matInput [(ngModel)]="newDocument" placeholder="Enter document name">
        </mat-form-field>
      </div>
      <div class="documents-list">
        <ul *ngIf="patient.documents && patient.documents.length > 0">
          <li *ngFor="let doc of patient.documents" class="document-item">
            <mat-icon>insert_drive_file</mat-icon> {{ doc }}
          </li>
        </ul>
        <p *ngIf="!patient.documents || patient.documents.length === 0" class="no-items">No documents available.</p>
      </div>
    </div>

    <!-- Medical History Section -->
    <div class="medical-history-section">
      <h3><mat-icon>history</mat-icon> Medical History</h3>
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label>Add New Medical History</mat-label>
          <input matInput [(ngModel)]="newMedicalHistory" placeholder="Enter medical history">
        </mat-form-field>
      </div>
      <div class="history-list">
        <ul *ngIf="patient.medicalHistory && patient.medicalHistory.length > 0">
          <li *ngFor="let history of patient.medicalHistory" class="history-item">
            <mat-icon>event_note</mat-icon> {{ history }}
          </li>
        </ul>
        <p *ngIf="!patient.medicalHistory || patient.medicalHistory.length === 0" class="no-items">No medical history available.</p>
      </div>
    </div>
  </mat-card-content>

  <mat-card-actions>
    <button mat-raised-button color="primary" (click)="savePatient()">
      <mat-icon>save</mat-icon> Save
    </button>
    <button mat-button (click)="cancel()">
      <mat-icon>close</mat-icon> Cancel
    </button>
  </mat-card-actions>
</mat-card>

<div *ngIf="isLoading" class="loading-container">
  <mat-spinner diameter="40"></mat-spinner>
  <p>Loading patient details...</p>
</div>

<div *ngIf="errorMessage" class="error-message">
  <mat-icon>error_outline</mat-icon> {{ errorMessage }}
</div>